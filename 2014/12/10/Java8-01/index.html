<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Java 8 新特性 | Li7nux&#39;s Note</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="Java">
<meta name="keywords" content="Java">
<meta property="og:type" content="article">
<meta property="og:title" content="Java 8 新特性">
<meta property="og:url" content="http://note.olddriver.me/2014/12/10/Java8-01/index.html">
<meta property="og:site_name" content="Li7nux&#39;s Note">
<meta property="og:description" content="Java">
<meta property="og:updated_time" content="2017-10-12T15:39:39.860Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Java 8 新特性">
<meta name="twitter:description" content="Java">
  
    <link rel="alternate" href="/atom.xml" title="Li7nux&#39;s Note" type="application/atom+xml">
  
  
    <link rel="icon" href="favicon.ico">
  
  
    
  
  <link rel="stylesheet" href="/css/style.css">
  

</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    
    <div id="header-inner" class="inner">
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="搜索"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://note.olddriver.me"></form>
      </div>
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">首页</a>
        
          <a class="main-nav-link" href="/archives">归档</a>
        
          <a class="main-nav-link" href="/aboutme">关于</a>
        
      </nav>
      
    </div>
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Li7nux&#39;s Note</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">我的笔记</a>
        </h2>
      
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-Java8-01" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2014/12/10/Java8-01/" class="article-date">
  <time datetime="2014-12-10T15:01:22.000Z" itemprop="datePublished">2014-12-10</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Java/">Java</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      Java 8 新特性
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <!-- Table of Contents -->
        
        <h3 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h3><p>Lambda表达式是Java SE 8 中的一个非常重要的特性。Lambda表达式给你提供了一种表达式替换功能接口的方式。Lambda表达式就和方法一样，他提供了一个正常的参数列表和一个使用这些参数的主体(可以是一个表达式或一个代码块)。<br>Lambda表达式还扩展了集合库，增加了2个对集合数据进行批量操作的包 : <code>java.util.function</code> 和 <code>java.util.stream</code> 。流(stream)就如同迭代器(iterator)，但附加了许多额外的功能。总的来说，Lambda表达式和stream是自Java语言添加泛型(Generics)和注解(annotation)以来最大的变化。</p>
<a id="more"></a>
<h3 id="学习环境"><a href="#学习环境" class="headerlink" title="学习环境"></a>学习环境</h3><ul>
<li>JDK8</li>
<li>Eclipse 或其它编译器</li>
</ul>
<h3 id="Lambda表达式语法"><a href="#Lambda表达式语法" class="headerlink" title="Lambda表达式语法"></a>Lambda表达式语法</h3><p><strong>基本的Lambda表达式 :</strong><br><code>(parameters) -&gt; expression</code> 或 <code>(parameters) -&gt;{ statements; }</code><br><strong>几个简单的Lambda表达式的例子 : </strong><br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="number">1</span>. () -&gt; <span class="number">5</span>  <span class="comment">// 不需要传递参数，返回值为  5</span></div><div class="line"><span class="number">2</span>. x -&gt; <span class="number">2</span> * x  <span class="comment">// 传入一个数字，返回值为该数值的2倍</span></div><div class="line"><span class="number">3</span>. (x, y) -&gt; x – y <span class="comment">// 传入两个数字，返回值为两数之差</span></div><div class="line"><span class="number">4</span>. (<span class="keyword">int</span> x, <span class="keyword">int</span> y) -&gt; x + y  <span class="comment">// 传入两个int型整数，返回两数之和</span></div><div class="line"><span class="number">5</span>. (String s) -&gt; System.out.print(s)  <span class="comment">// 传入一个字符串，在控制台打印，不返回任何值</span></div></pre></td></tr></table></figure></p>
<h3 id="基本的Lambda例子"><a href="#基本的Lambda例子" class="headerlink" title="基本的Lambda例子"></a>基本的Lambda例子</h3><p><strong>将用for循环遍历List的代码用Lambda表达式替换 : </strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">List&lt;String&gt; strs = <span class="keyword">new</span> ArrayList&lt;String&gt;();</div><div class="line">strs.add(<span class="string">"Str1"</span>);</div><div class="line">strs.add(<span class="string">"Str2"</span>);</div><div class="line">strs.add(<span class="string">"Str3"</span>);</div><div class="line"></div><div class="line">System.out.println(<span class="string">"1. 普通的 for 循环 : "</span>);</div><div class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; strs.size(); i++)&#123;</div><div class="line">	System.out.println(strs.get(i));</div><div class="line">&#125;</div><div class="line">	</div><div class="line">System.out.println(<span class="string">"2. 增强 for 循环 : "</span>);</div><div class="line"><span class="keyword">for</span>(String str : strs)&#123;</div><div class="line">	System.out.println(str);</div><div class="line">&#125;</div><div class="line">		</div><div class="line">System.out.println(<span class="string">"3. Lambda 表达式 : "</span>);</div><div class="line">strs.forEach(str -&gt; System.out.println(str));</div><div class="line">	</div><div class="line">System.out.println(<span class="string">"4. Java 8 双冒号操作符"</span>);</div><div class="line">strs.forEach(System.out::println);</div></pre></td></tr></table></figure>
<p><strong>图形界面匿名类使用Lambda表达式替换</strong><br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 使用匿名内部类</span></div><div class="line">btn.setOnAction(<span class="keyword">new</span> EventHandler&lt;ActionEvent&gt;() &#123;</div><div class="line">          <span class="meta">@Override</span></div><div class="line">          <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">handle</span><span class="params">(ActionEvent event)</span> </span>&#123;</div><div class="line">              System.out.println(<span class="string">"Hello World!"</span>); </div><div class="line">          &#125;</div><div class="line">    &#125;);</div><div class="line"> </div><div class="line"><span class="comment">// 或者使用 lambda expression</span></div><div class="line">btn.setOnAction(event -&gt; System.out.println(<span class="string">"Hello World!"</span>));</div></pre></td></tr></table></figure></p>
<p><strong>Lambda表达式实现Runable接口</strong><br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 1.1使用匿名内部类</span></div><div class="line"><span class="keyword">new</span> Thread(<span class="keyword">new</span> Runnable() &#123;</div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</div><div class="line">        System.out.println(<span class="string">"Hello world !"</span>);</div><div class="line">    &#125;</div><div class="line">&#125;).start();</div><div class="line"></div><div class="line"><span class="comment">// 1.2使用 lambda expression</span></div><div class="line"><span class="keyword">new</span> Thread(() -&gt; System.out.println(<span class="string">"Hello world !"</span>)).start();</div><div class="line"></div><div class="line"><span class="comment">// 2.1使用匿名内部类</span></div><div class="line">Runnable race1 = <span class="keyword">new</span> Runnable() &#123;</div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</div><div class="line">        System.out.println(<span class="string">"Hello world !"</span>);</div><div class="line">    &#125;</div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="comment">// 2.2使用 lambda expression</span></div><div class="line">Runnable race2 = () -&gt; System.out.println(<span class="string">"Hello world !"</span>);</div><div class="line"> </div><div class="line"><span class="comment">// 直接调用 run 方法(没开新线程哦!)</span></div><div class="line">race1.run();</div><div class="line">race2.run();</div></pre></td></tr></table></figure></p>
<h3 id="使用Lambdas对集合进行排序"><a href="#使用Lambdas对集合进行排序" class="headerlink" title="使用Lambdas对集合进行排序"></a>使用Lambdas对集合进行排序</h3><p>在Java中，使用 Comparator 类对集合进行排序。</p>
<p><strong>其它规则排序</strong><br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div></pre></td><td class="code"><pre><div class="line">String[] players = &#123; <span class="string">"Rafael Nadal"</span>, <span class="string">"Novak Djokovic"</span>, <span class="string">"Stanislas Wawrinka"</span>, <span class="string">"David Ferrer"</span>, <span class="string">"Roger Federer"</span>,</div><div class="line">		<span class="string">"Andy Murray"</span>, <span class="string">"Tomas Berdych"</span>, <span class="string">"Juan Martin Del Potro"</span>, <span class="string">"Richard Gasquet"</span>, <span class="string">"John Isner"</span> &#125;;</div><div class="line"></div><div class="line"><span class="comment">// Show the list of players</span></div><div class="line">System.out.print(<span class="string">"Show the list of players:\n"</span>);</div><div class="line">Arrays.asList(players).forEach((player) -&gt; System.out.println(player));</div><div class="line"></div><div class="line"><span class="comment">// Sort players by name using anonymous innerclass</span></div><div class="line">Arrays.sort(players, <span class="keyword">new</span> Comparator&lt;String&gt;() &#123;</div><div class="line">	<span class="meta">@Override</span></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">compare</span><span class="params">(String s1, String s2)</span> </span>&#123;</div><div class="line">		<span class="keyword">return</span> (s1.compareTo(s2));</div><div class="line">	&#125;</div><div class="line">&#125;);</div><div class="line"></div><div class="line"><span class="comment">// Sort players by name using lambda expression</span></div><div class="line">Comparator&lt;String&gt; sortByName = (String s1, String s2) -&gt; (s1.compareTo(s2));</div><div class="line">Arrays.sort(players, sortByName);</div><div class="line"><span class="comment">// or this</span></div><div class="line">Arrays.sort(players, (String s1, String s2) -&gt; (s1.compareTo(s2)));</div><div class="line"></div><div class="line">System.out.print(<span class="string">"\nShow the list of players after sorting by name:\n"</span>);</div><div class="line">Arrays.asList(players).forEach((player) -&gt; System.out.println(player));</div><div class="line"></div><div class="line"><span class="comment">// Sort players by surname using anonymous innerclass</span></div><div class="line">Arrays.sort(players, <span class="keyword">new</span> Comparator&lt;String&gt;() &#123;</div><div class="line">	<span class="meta">@Override</span></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">compare</span><span class="params">(String s1, String s2)</span> </span>&#123;</div><div class="line">		<span class="keyword">return</span> (s1.substring(s1.indexOf(<span class="string">" "</span>)).compareTo(s2.substring(s2.indexOf(<span class="string">" "</span>))));</div><div class="line">	&#125;</div><div class="line">&#125;);</div><div class="line"></div><div class="line"><span class="comment">// Sort players by surname using lambda expression</span></div><div class="line">Comparator&lt;String&gt; sortBySurname = (String s1,</div><div class="line">		String s2) -&gt; (s1.substring(s1.indexOf(<span class="string">" "</span>)).compareTo(s2.substring(s2.indexOf(<span class="string">" "</span>))));</div><div class="line">Arrays.sort(players, sortBySurname);</div><div class="line"><span class="comment">// or this</span></div><div class="line">Arrays.sort(players,</div><div class="line">		(String s1, String s2) -&gt; (s1.substring(s1.indexOf(<span class="string">" "</span>)).compareTo(s2.substring(s2.indexOf(<span class="string">" "</span>)))));</div><div class="line"></div><div class="line">System.out.print(<span class="string">"\nShow the list of players after sorting by surname:\n"</span>);</div><div class="line">Arrays.asList(players).forEach((player) -&gt; System.out.println(player));</div><div class="line"></div><div class="line"><span class="comment">// Sort players by name lenght using anonymous innerclass</span></div><div class="line">Arrays.sort(players, <span class="keyword">new</span> Comparator&lt;String&gt;() &#123;</div><div class="line">	<span class="meta">@Override</span></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">compare</span><span class="params">(String s1, String s2)</span> </span>&#123;</div><div class="line">		<span class="keyword">return</span> (s1.length() - s2.length());</div><div class="line">	&#125;</div><div class="line">&#125;);</div><div class="line"></div><div class="line"><span class="comment">// Sort players by name lenght using lambda expression</span></div><div class="line">Comparator&lt;String&gt; sortByNameLenght = (String s1, String s2) -&gt; (s1.length() - s2.length());</div><div class="line">Arrays.sort(players, sortByNameLenght);</div><div class="line"><span class="comment">// or this</span></div><div class="line">Arrays.sort(players, (String s1, String s2) -&gt; (s1.length() - s2.length()));</div><div class="line"></div><div class="line">System.out.print(<span class="string">"\nShow the list of players after sorting by length:\n"</span>);</div><div class="line">Arrays.asList(players).forEach((player) -&gt; System.out.println(player));</div><div class="line"></div><div class="line"><span class="comment">// Sort players by last letter using anonymous innerclass</span></div><div class="line">Arrays.sort(players, <span class="keyword">new</span> Comparator&lt;String&gt;() &#123;</div><div class="line">	<span class="meta">@Override</span></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">compare</span><span class="params">(String s1, String s2)</span> </span>&#123;</div><div class="line">		<span class="keyword">return</span> (s1.charAt(s1.length() - <span class="number">1</span>) - s2.charAt(s2.length() - <span class="number">1</span>));</div><div class="line">	&#125;</div><div class="line">&#125;);</div><div class="line"></div><div class="line"><span class="comment">// Sort players by last letter using lambda expression</span></div><div class="line">Comparator&lt;String&gt; sortByLastLetter = (String s1,</div><div class="line">		String s2) -&gt; (s1.charAt(s1.length() - <span class="number">1</span>) - s2.charAt(s2.length() - <span class="number">1</span>));</div><div class="line">Arrays.sort(players, sortByLastLetter);</div><div class="line"><span class="comment">// or this</span></div><div class="line">Arrays.sort(players, (String s1, String s2) -&gt; (s1.charAt(s1.length() - <span class="number">1</span>) - s2.charAt(s2.length() - <span class="number">1</span>)));</div><div class="line"></div><div class="line">System.out.print(<span class="string">"\nShow the list of players after sorting by last letter:\n"</span>);</div><div class="line">Arrays.asList(players).forEach((player) -&gt; System.out.println(player));</div></pre></td></tr></table></figure></p>
<h3 id="使用Lambdas和Streams"><a href="#使用Lambdas和Streams" class="headerlink" title="使用Lambdas和Streams"></a>使用Lambdas和Streams</h3><p>Stream 是对集合的包装，通常和Lambda一起使用。Lambda支持许多操作，如 : map, filter, limit, sorted, count, min, max, sum, collect 等等。同样,Stream使用懒运算,他们并不会真正地读取所有数据,遇到像getFirst() 这样的方法就会结束链式语法。 在接下来的例子中,我们将探索lambdas和streams 能做什么。 我们创建了一个Person类并使用这个类来添加一些数据到list中,将用于进一步流操作。<br>Person 是一个Pojo类:<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</div><div class="line"></div><div class="line"><span class="keyword">private</span> String firstName, lastName, job, gender;</div><div class="line"><span class="keyword">private</span> <span class="keyword">int</span> salary, age;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="title">Person</span><span class="params">(String firstName, String lastName, String job,</span></span></div><div class="line">                String gender, <span class="keyword">int</span> age, <span class="keyword">int</span> salary)       &#123;</div><div class="line">          <span class="keyword">this</span>.firstName = firstName;</div><div class="line">          <span class="keyword">this</span>.lastName = lastName;</div><div class="line">          <span class="keyword">this</span>.gender = gender;</div><div class="line">          <span class="keyword">this</span>.age = age;</div><div class="line">          <span class="keyword">this</span>.job = job;</div><div class="line">          <span class="keyword">this</span>.salary = salary;</div><div class="line">&#125;</div><div class="line"><span class="comment">// Getter and Setter </span></div><div class="line"><span class="comment">// . . . . .</span></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>创建两个List:<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line">List&lt;Person&gt; javaProgrammers = <span class="keyword">new</span> ArrayList&lt;Person&gt;() &#123;</div><div class="line">  &#123;</div><div class="line">    add(<span class="keyword">new</span> Person(<span class="string">"Elsdon"</span>, <span class="string">"Jaycob"</span>, <span class="string">"Java programmer"</span>, <span class="string">"male"</span>, <span class="number">43</span>, <span class="number">2000</span>));</div><div class="line">    add(<span class="keyword">new</span> Person(<span class="string">"Tamsen"</span>, <span class="string">"Brittany"</span>, <span class="string">"Java programmer"</span>, <span class="string">"female"</span>, <span class="number">23</span>, <span class="number">1500</span>));</div><div class="line">    add(<span class="keyword">new</span> Person(<span class="string">"Floyd"</span>, <span class="string">"Donny"</span>, <span class="string">"Java programmer"</span>, <span class="string">"male"</span>, <span class="number">33</span>, <span class="number">1800</span>));</div><div class="line">    add(<span class="keyword">new</span> Person(<span class="string">"Sindy"</span>, <span class="string">"Jonie"</span>, <span class="string">"Java programmer"</span>, <span class="string">"female"</span>, <span class="number">32</span>, <span class="number">1600</span>));</div><div class="line">    add(<span class="keyword">new</span> Person(<span class="string">"Vere"</span>, <span class="string">"Hervey"</span>, <span class="string">"Java programmer"</span>, <span class="string">"male"</span>, <span class="number">22</span>, <span class="number">1200</span>));</div><div class="line">    add(<span class="keyword">new</span> Person(<span class="string">"Maude"</span>, <span class="string">"Jaimie"</span>, <span class="string">"Java programmer"</span>, <span class="string">"female"</span>, <span class="number">27</span>, <span class="number">1900</span>));</div><div class="line">    add(<span class="keyword">new</span> Person(<span class="string">"Shawn"</span>, <span class="string">"Randall"</span>, <span class="string">"Java programmer"</span>, <span class="string">"male"</span>, <span class="number">30</span>, <span class="number">2300</span>));</div><div class="line">    add(<span class="keyword">new</span> Person(<span class="string">"Jayden"</span>, <span class="string">"Corrina"</span>, <span class="string">"Java programmer"</span>, <span class="string">"female"</span>, <span class="number">35</span>, <span class="number">1700</span>));</div><div class="line">    add(<span class="keyword">new</span> Person(<span class="string">"Palmer"</span>, <span class="string">"Dene"</span>, <span class="string">"Java programmer"</span>, <span class="string">"male"</span>, <span class="number">33</span>, <span class="number">2000</span>));</div><div class="line">    add(<span class="keyword">new</span> Person(<span class="string">"Addison"</span>, <span class="string">"Pam"</span>, <span class="string">"Java programmer"</span>, <span class="string">"female"</span>, <span class="number">34</span>, <span class="number">1300</span>));</div><div class="line">  &#125;</div><div class="line">&#125;;</div><div class="line"></div><div class="line">List&lt;Person&gt; phpProgrammers = <span class="keyword">new</span> ArrayList&lt;Person&gt;() &#123;</div><div class="line">  &#123;</div><div class="line">    add(<span class="keyword">new</span> Person(<span class="string">"Jarrod"</span>, <span class="string">"Pace"</span>, <span class="string">"PHP programmer"</span>, <span class="string">"male"</span>, <span class="number">34</span>, <span class="number">1550</span>));</div><div class="line">    add(<span class="keyword">new</span> Person(<span class="string">"Clarette"</span>, <span class="string">"Cicely"</span>, <span class="string">"PHP programmer"</span>, <span class="string">"female"</span>, <span class="number">23</span>, <span class="number">1200</span>));</div><div class="line">    add(<span class="keyword">new</span> Person(<span class="string">"Victor"</span>, <span class="string">"Channing"</span>, <span class="string">"PHP programmer"</span>, <span class="string">"male"</span>, <span class="number">32</span>, <span class="number">1600</span>));</div><div class="line">    add(<span class="keyword">new</span> Person(<span class="string">"Tori"</span>, <span class="string">"Sheryl"</span>, <span class="string">"PHP programmer"</span>, <span class="string">"female"</span>, <span class="number">21</span>, <span class="number">1000</span>));</div><div class="line">    add(<span class="keyword">new</span> Person(<span class="string">"Osborne"</span>, <span class="string">"Shad"</span>, <span class="string">"PHP programmer"</span>, <span class="string">"male"</span>, <span class="number">32</span>, <span class="number">1100</span>));</div><div class="line">    add(<span class="keyword">new</span> Person(<span class="string">"Rosalind"</span>, <span class="string">"Layla"</span>, <span class="string">"PHP programmer"</span>, <span class="string">"female"</span>, <span class="number">25</span>, <span class="number">1300</span>));</div><div class="line">    add(<span class="keyword">new</span> Person(<span class="string">"Fraser"</span>, <span class="string">"Hewie"</span>, <span class="string">"PHP programmer"</span>, <span class="string">"male"</span>, <span class="number">36</span>, <span class="number">1100</span>));</div><div class="line">    add(<span class="keyword">new</span> Person(<span class="string">"Quinn"</span>, <span class="string">"Tamara"</span>, <span class="string">"PHP programmer"</span>, <span class="string">"female"</span>, <span class="number">21</span>, <span class="number">1000</span>));</div><div class="line">    add(<span class="keyword">new</span> Person(<span class="string">"Alvin"</span>, <span class="string">"Lance"</span>, <span class="string">"PHP programmer"</span>, <span class="string">"male"</span>, <span class="number">38</span>, <span class="number">1600</span>));</div><div class="line">    add(<span class="keyword">new</span> Person(<span class="string">"Evonne"</span>, <span class="string">"Shari"</span>, <span class="string">"PHP programmer"</span>, <span class="string">"female"</span>, <span class="number">40</span>, <span class="number">1800</span>));</div><div class="line">  &#125;</div><div class="line">&#125;;</div></pre></td></tr></table></figure></p>
<p>现在我们使用forEach方法来迭代输出上述列表:<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">System.out.println(<span class="string">"forEach 输出所有名字 ！All Names :"</span>);</div><div class="line">System.out.println(<span class="string">"Java :"</span>);</div><div class="line">javaProgrammers.forEach( javaMan -&gt; System.out.printf( <span class="string">"%s %s;"</span>, javaMan.getFirstName(), javaMan.getLastName()));</div><div class="line">System.out.println(<span class="string">"\nPhp : "</span>);</div><div class="line">phpProgrammers.forEach( phpMan -&gt; System.out.printf(<span class="string">"%s %s; "</span>, phpMan.getFirstName(), phpMan.getLastName()));</div></pre></td></tr></table></figure></p>
<p>我们同样使用forEach方法,增加Java程序员的工资5%:<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">System.out.println(<span class="string">"\nJava 程序员加薪水 5% : "</span>);</div><div class="line">Consumer&lt;Person&gt; giveRaise = e -&gt; e.setSalary(e.getSalary() / <span class="number">100</span> * <span class="number">105</span>);</div><div class="line">javaProgrammers.forEach(giveRaise);</div><div class="line">javaProgrammers.forEach( e -&gt; System.out.print( e.getLastName() + <span class="string">" salary : "</span> + e.getSalary() * <span class="number">1.05</span> + <span class="string">" ;  "</span>) );</div></pre></td></tr></table></figure></p>
<p>另一个有用的方法是过滤器filter() ,让我们显示月薪超过1400美元的PHP程序员:<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">System.out.println(<span class="string">"\n过滤出月薪高于1400美元的PHP程序员 : "</span>);</div><div class="line">phpProgrammers.stream().filter( e -&gt; ( e.getSalary() &gt; <span class="number">1400</span> )).forEach( (e) -&gt; System.out.printf(<span class="string">"%s %s;"</span>, e.getLastName(), e.getSalary()));</div></pre></td></tr></table></figure></p>
<p>我们也可以定义过滤器,然后重用它们来执行其他操作:<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//重用 Filter</span></div><div class="line">System.out.println();</div><div class="line">System.out.println(<span class="string">"输出年龄大于24，薪水高于1400的女Java程序员 : "</span>);</div><div class="line">		javaProgrammers.stream().filter(ageFilter).filter(salaryFilter).filter(genderFilter).forEach( p -&gt; System.out.printf(<span class="string">"%s %s %s %s; "</span>, p.getLastName(), p.getAge(), p.getGender(), p.getSalary()));</div></pre></td></tr></table></figure></p>
<p>使用 limit() 方法限制结果集<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//使用 limit() 方法限制结果集</span></div><div class="line">System.out.println();</div><div class="line">System.out.println(<span class="string">"最前面的3个女Java程序员 : "</span>);</div><div class="line">javaProgrammers.stream().filter(genderFilter).limit(<span class="number">3</span>).forEach( p -&gt; System.out.printf( <span class="string">"%s %s;"</span>, p.getLastName(), p.getGender()));</div></pre></td></tr></table></figure></p>
<p>stream() 处理排序 : </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//Stream 处理排序</span></div><div class="line">System.out.println();</div><div class="line">System.out.println(<span class="string">"根据 FirstName 排序，显示前5个Java程序员名字 : "</span>);</div><div class="line">List&lt;Person&gt; sortedJava = javaProgrammers.stream().sorted( (p1, p2) -&gt; ( p1.getFirstName().compareTo( p2.getFirstName() ) )).limit(<span class="number">5</span>).collect(Collectors.toList());</div><div class="line">sortedJava.forEach( p -&gt; System.out.print(p.getFirstName() + <span class="string">"    "</span>));</div><div class="line"></div><div class="line">System.out.println();</div><div class="line">System.out.println(<span class="string">"根据java程序员薪水排序 :"</span>);</div><div class="line">List&lt;Person&gt; sortSalaryJava = javaProgrammers.stream().sorted( (p1, p2) -&gt; ( p1.getSalary() - ( p2.getSalary()) )).collect(Collectors.toList());</div><div class="line">sortSalaryJava.forEach( p -&gt; System.out.print(p.getFirstName() + <span class="string">" : "</span> + p.getSalary() + <span class="string">" ;    "</span>));</div></pre></td></tr></table></figure>
<p>Stream 中的 取最值 min(), max()<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// stream 中的 min() max() 取最值</span></div><div class="line">		System.out.println();</div><div class="line">		System.out.println(<span class="string">"Java程序员最低工资 : "</span>);</div><div class="line">		Person min = javaProgrammers.stream().min( (p1, p2) -&gt; ( p1.getSalary() - p2.getSalary())).get();</div><div class="line">		System.out.println(min.getFirstName() + <span class="string">" : "</span> + min.getSalary());</div><div class="line">		System.out.println(<span class="string">"Java 程序员最高工资 : "</span>);</div><div class="line">		Person max = javaProgrammers.stream().max( (p1, p2) -&gt; (p1.getSalary() - p2.getSalary()) ).get();</div><div class="line">		System.out.println(max.getFirstName() + <span class="string">" : "</span> + max.getSalary());</div></pre></td></tr></table></figure></p>
<p>上面的例子中我们已经看到 collect 方法是如何工作的。 结合 map 方法,我们可以使用 collect 方法来将我们的结果集放到一个字符串,一个 Set 或一个TreeSet中:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">System.out.println(<span class="string">"将 PHP programmers 的 first name 拼接成字符串:"</span>); </div><div class="line">String phpers = phpProgrammers.stream().map(Person::getFirstName).collect( Collectors.joining(<span class="string">" ; "</span>));</div><div class="line">System.out.println(phpers);</div><div class="line"></div><div class="line">System.out.println(<span class="string">"将 Java 程序员的 firstName 放到一个 Set 中 : "</span>);</div><div class="line">Set&lt;String&gt; javaFirstName = javaProgrammers.stream().map(Person::getFirstName).collect(Collectors.toSet());</div><div class="line">javaFirstName.forEach(str -&gt; System.out.print( str + <span class="string">"    "</span>));</div><div class="line">System.out.println();</div><div class="line"></div><div class="line">System.out.println(<span class="string">"将 Java 程序员的 LastName 放到 TreeSet 中"</span>);</div><div class="line">TreeSet&lt;String&gt; javaLastName = javaProgrammers.stream().map(Person::getLastName).collect(Collectors.toCollection(TreeSet::<span class="keyword">new</span>));</div><div class="line">javaLastName.forEach( lastName -&gt; System.out.print(lastName + <span class="string">"    "</span>));</div></pre></td></tr></table></figure>
<p>Stram 还可以是并行的(parallel) :<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">int</span> totalSalary = javaProgrammers.parallelStream().mapToInt( p -&gt; p.getSalary()).sum();</div><div class="line">		System.out.println(<span class="string">"Java 程序员总薪水 : "</span> + totalSalary);</div></pre></td></tr></table></figure></p>
<p>我们可以使用summaryStatistics方法获得stream 中元素的各种汇总数据。 接下来,我们可以访问这些方法,比如getMax, getMin, getSum或getAverage :</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//数据汇总 : getMax, getMin, getSum, getAverage</span></div><div class="line">		List&lt;Integer&gt; salary = javaProgrammers.stream().map(Person::getSalary).collect(Collectors.toList());</div><div class="line">		IntSummaryStatistics stats = salary.stream().mapToInt( x -&gt; x).summaryStatistics();</div><div class="line">		System.out.println(<span class="string">"Java 程序员中最高薪水 : "</span> + stats.getMax());</div><div class="line">		System.out.println(<span class="string">"Java 程序员中最低薪水 : "</span> + stats.getMin());</div><div class="line">		System.out.println(<span class="string">"Java 程序员总薪水 : "</span> + stats.getSum());</div><div class="line">		System.out.println(<span class="string">"Java 程序员平均薪水 : "</span> + stats.getAverage());</div><div class="line">		System.out.println(<span class="string">"Java 程序员总人数 : "</span> + stats.getCount());</div></pre></td></tr></table></figure>
<h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><p>在本文中,我们学会了使用lambda表达式的不同方式,从基本的示例,到使用lambdas和streams的复杂示例。 此外,我们还学习了如何使用lambda表达式与Comparator 类来对Java集合进行排序。</p>
<p>学习链接：</p>
<ul>
<li><a href="http://blog.csdn.net/renfufei/article/details/24600507" target="_blank" rel="external">http://blog.csdn.net/renfufei/article/details/24600507</a></li>
<li><a href="http://www.importnew.com/16436.html" target="_blank" rel="external">http://www.importnew.com/16436.html</a></li>
</ul>
<p>备注 ：<br>其实是lambda表达式的一个简化写法，所引用的方法其实是lambda表达式的方法体实现，语法也很简单，左边是容器（可以是类名，实例名），中间是”::”，右边是相应的方法名。如下所示：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ObjectReference::methodName</div></pre></td></tr></table></figure></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://note.olddriver.me/2014/12/10/Java8-01/" data-id="cj9i0oreg000f08cds866ey76" class="article-share-link">分享</a>
      
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Java/">Java</a></li></ul>

    </footer>
  </div>
  
    
 <script src="/jquery/jquery.min.js"></script>
  <div id="random_posts">
    <h2>推荐文章</h2>
    <div class="random_posts_ul">
      <script>
          var random_count =4
          var site = {BASE_URI:'/'};
          function load_random_posts(obj) {
              var arr=site.posts;
              if (!obj) return;
              // var count = $(obj).attr('data-count') || 6;
              for (var i, tmp, n = arr.length; n; i = Math.floor(Math.random() * n), tmp = arr[--n], arr[n] = arr[i], arr[i] = tmp);
              arr = arr.slice(0, random_count);
              var html = '<ul>';
            
              for(var j=0;j<arr.length;j++){
                var item=arr[j];
                html += '<li><strong>' + 
                item.date + ':&nbsp;&nbsp;<a href="' + (site.BASE_URI+item.uri) + '">' + 
                (item.title || item.uri) + '</a></strong>';
                if(item.excerpt){
                  html +='<div class="post-excerpt">'+item.excerpt+'</div>';
                }
                html +='</li>';
                
              }
              $(obj).html(html + '</ul>');
          }
          $('.random_posts_ul').each(function () {
              var c = this;
              if (!site.posts || !site.posts.length){
                  $.getJSON(site.BASE_URI + 'js/posts.js',function(json){site.posts = json;load_random_posts(c)});
              } 
               else{
                load_random_posts(c);
              }
          });
      </script>
    </div>
  </div>

    
<nav id="article-nav">
  
  
    <a href="/2014/10/21/Java-sort-algorithm/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">下一篇</strong>
      <div class="article-nav-title">Java排序算法</div>
    </a>
  
</nav>

  
</article>
 
     
  <div class="comments" id="comments">
    
     
       
      <div id="cloud-tie-wrapper" class="cloud-tie-wrapper"></div>
    
       
      
      
  </div>
 
  

</section>
           
    <aside id="sidebar">
  
    

  
    
    <div class="widget-wrap">
    
      <div class="widget" id="toc-widget-fixed">
      
        <strong class="toc-title">文章目录</strong>
        <div class="toc-widget-list">
              <ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#简介"><span class="toc-number">1.</span> <span class="toc-text">简介</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#学习环境"><span class="toc-number">2.</span> <span class="toc-text">学习环境</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Lambda表达式语法"><span class="toc-number">3.</span> <span class="toc-text">Lambda表达式语法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#基本的Lambda例子"><span class="toc-number">4.</span> <span class="toc-text">基本的Lambda例子</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#使用Lambdas对集合进行排序"><span class="toc-number">5.</span> <span class="toc-text">使用Lambdas对集合进行排序</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#使用Lambdas和Streams"><span class="toc-number">6.</span> <span class="toc-text">使用Lambdas和Streams</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#总结"><span class="toc-number">7.</span> <span class="toc-text">总结</span></a></li></ol>
          </div>
      </div>
    </div>

  
    

  
    
  
    
  
    

  
    
  
    <!--微信公众号二维码-->


  
</aside>

      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-left">
      &copy; 2014 - 2017 Li7nux&nbsp;|&nbsp;
      主题 <a href="https://github.com/giscafer/hexo-theme-cafe/" target="_blank">Cafe</a>
    </div>
     <div id="footer-right">
      联系方式&nbsp;|&nbsp;li7nux@gmail.com
    </div>
  </div>
</footer>
 <script src="/jquery/jquery.min.js"></script>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">首页</a>
  
    <a href="/archives" class="mobile-nav-link">归档</a>
  
    <a href="/aboutme" class="mobile-nav-link">关于</a>
  
</nav>
    <img class="back-to-top-btn" src="/images/fly-to-top.png"/>
<script>
// Elevator script included on the page, already.
window.onload = function() {
  var elevator = new Elevator({
    selector:'.back-to-top-btn',
    element: document.querySelector('.back-to-top-btn'),
    duration: 1000 // milliseconds
  });
}
</script>
      

  
    <script>
      var cloudTieConfig = {
        url: document.location.href, 
        sourceId: "",
        productKey: "e2fb4051c49842688ce669e634bc983f",
        target: "cloud-tie-wrapper"
      };
    </script>
    <script src="https://img1.ws.126.net/f2e/tie/yun/sdk/loader.js"></script>
    

  







<!-- author:forvoid begin -->
<!-- author:forvoid begin -->

<!-- author:forvoid end -->

<!-- author:forvoid end -->


  
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
      })
    </script>

    <script type="text/x-mathjax-config">
      MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
        }
      })
    </script>
    <script type="text/javascript" src="https://cdn.bootcss.com/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
  


 <script src="/js/is.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>
<script src="/js/elevator.js"></script>
  </div>
</body>
</html>